{
  "label_priorities": {
    "bruch": 0,
    "rest": 1,
    "farbfehler": 2,
    "normal": 3
  },
  "label_class_map": {
    "normal": "Normal",
    "different colour spot": "Farbfehler",
    "similar colour spot": "Farbfehler",
    "burnt": "Farbfehler",
    "farbfehler": "Farbfehler",
    "middle breakage": "Bruch",
    "corner or edge breakage": "Bruch",
    "bruch": "Bruch",
    "fryum stuck together": "Rest",
    "small scratches": "Rest",
    "other": "Rest",
    "fragment": "Rest",
    "rest": "Rest"
  },
  "label_rules": [
    {
      "label": "fragment",
      "min_score": 3.0,
      "conditions": [
        {
          "metric": "fragment_count",
          "op": ">=",
          "value": 1,
          "weight": 3.0,
          "reason": "Fragmente: {fragment_count}"
        },
        {
          "metric": "outer_count",
          "op": ">=",
          "value": 3,
          "weight": 2.0,
          "reason": "Mehrfachobj.: {outer_count}"
        },
        {
          "metric": "total_holes",
          "op": ">=",
          "value": 8,
          "weight": 1.0,
          "reason": "Hohlräume: {total_holes}"
        }
      ]
    },
    {
      "label": "fryum stuck together",
      "min_score": 2.5,
      "conditions": [
        {
          "metric": "window_ratio",
          "op": ">=",
          "value": 2.1,
          "weight": 2.5,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        },
        {
          "metric": "avg_window",
          "op": "<=",
          "value": 3800,
          "weight": 1.0,
          "reason": "Fensterfläche: {avg_window:.0f}"
        },
        {
          "metric": "symmetry",
          "op": "<=",
          "value": 85,
          "weight": 1.0,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "outer_count",
          "op": ">=",
          "value": 2,
          "weight": 0.5,
          "reason": "Mehrfachobj.: {outer_count}"
        }
      ]
    },
    {
      "label": "small scratches",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "spot_area",
          "op": "between",
          "min": 5,
          "max": 80,
          "weight": 1.5,
          "reason": "Fleckfläche: {spot_area}px"
        },
        {
          "metric": "texture_std",
          "op": "between",
          "min": 10,
          "max": 16,
          "weight": 1.0,
          "reason": "Textur: {texture_std:.1f}"
        },
        {
          "metric": "symmetry",
          "op": ">=",
          "value": 93,
          "weight": 0.8,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "window_ratio",
          "op": "<=",
          "value": 1.3,
          "weight": 0.7,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        }
      ]
    },
    {
      "label": "other",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "is_anomaly",
          "op": "==",
          "value": true,
          "weight": 1.0,
          "reason": "Anomalie"
        },
        {
          "metric": "window_ratio",
          "op": "between",
          "min": 1.4,
          "max": 2.2,
          "weight": 1.0,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        },
        {
          "metric": "symmetry",
          "op": "between",
          "min": 82,
          "max": 90,
          "weight": 0.7,
          "reason": "Symmetrie: {symmetry:.1f}%"
        }
      ]
    },
    {
      "label": "rest",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "has_object",
          "op": "==",
          "value": false,
          "weight": 3.0,
          "reason": "Kein Objekt gefunden"
        },
        {
          "metric": "total_holes",
          "op": "!=",
          "value": 7,
          "weight": 1.0,
          "reason": "Hohlräume: {total_holes}"
        },
        {
          "metric": "symmetry",
          "op": "<=",
          "value": 82,
          "weight": 1.0,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "window_ratio",
          "op": ">=",
          "value": 2.0,
          "weight": 0.8,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        }
      ]
    },
    {
      "label": "middle breakage",
      "min_score": 2.5,
      "conditions": [
        {
          "metric": "total_holes",
          "op": "<=",
          "value": 6,
          "weight": 2.0,
          "reason": "Hohlräume: {total_holes}"
        },
        {
          "metric": "window_ratio",
          "op": ">=",
          "value": 1.5,
          "weight": 1.0,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        },
        {
          "metric": "symmetry",
          "op": "<=",
          "value": 90,
          "weight": 1.0,
          "reason": "Symmetrie: {symmetry:.1f}%"
        }
      ]
    },
    {
      "label": "corner or edge breakage",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "edge_segments",
          "op": "<=",
          "value": 6,
          "weight": 1.2,
          "reason": "Kantensegmente: {edge_segments}"
        },
        {
          "metric": "edge_damage",
          "op": "<=",
          "value": 0.92,
          "weight": 1.0,
          "reason": "Kantenschaden: {edge_damage:.2f}"
        },
        {
          "metric": "symmetry",
          "op": ">=",
          "value": 90,
          "weight": 0.5,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "window_ratio",
          "op": "<=",
          "value": 1.4,
          "weight": 0.3,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        }
      ]
    },
    {
      "label": "bruch",
      "min_score": 2.5,
      "conditions": [
        {
          "metric": "symmetry",
          "op": "<=",
          "value": 82,
          "weight": 2.0,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "total_holes",
          "op": "<=",
          "value": 6,
          "weight": 1.0,
          "reason": "Hohlräume: {total_holes}"
        },
        {
          "metric": "window_ratio",
          "op": ">=",
          "value": 2.0,
          "weight": 1.0,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        }
      ]
    },
    {
      "label": "burnt",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "has_color",
          "op": "==",
          "value": true,
          "weight": 0.5,
          "reason": "Farbabweichung erkannt"
        },
        {
          "metric": "spot_area",
          "op": ">=",
          "value": 350,
          "weight": 1.5,
          "reason": "Fleckfläche: {spot_area}px"
        },
        {
          "metric": "dark_delta",
          "op": ">=",
          "value": 32,
          "weight": 1.2,
          "reason": "Dunkelanteil: {dark_delta:.1f}"
        },
        {
          "metric": "texture_std",
          "op": ">=",
          "value": 20,
          "weight": 0.5,
          "reason": "Textur: {texture_std:.1f}"
        }
      ]
    },
    {
      "label": "different colour spot",
      "min_score": 2.5,
      "conditions": [
        {
          "metric": "has_color",
          "op": "==",
          "value": true,
          "weight": 0.5,
          "reason": "Farbabweichung erkannt"
        },
        {
          "metric": "spot_area",
          "op": ">=",
          "value": 80,
          "weight": 1.2,
          "reason": "Fleckfläche: {spot_area}px"
        },
        {
          "metric": "lab_std",
          "op": ">=",
          "value": 5.2,
          "weight": 1.0,
          "reason": "LAB-Std.: {lab_std:.2f}"
        },
        {
          "metric": "dark_delta",
          "op": "<=",
          "value": 34,
          "weight": 0.5,
          "reason": "Dunkelanteil: {dark_delta:.1f}"
        },
        {
          "metric": "texture_std",
          "op": "<=",
          "value": 18,
          "weight": 0.5,
          "reason": "Textur: {texture_std:.1f}"
        }
      ]
    },
    {
      "label": "similar colour spot",
      "min_score": 2.0,
      "conditions": [
        {
          "metric": "has_color",
          "op": "==",
          "value": true,
          "weight": 0.5,
          "reason": "Farbabweichung erkannt"
        },
        {
          "metric": "spot_area",
          "op": ">=",
          "value": 60,
          "weight": 1.0,
          "reason": "Fleckfläche: {spot_area}px"
        },
        {
          "metric": "texture_std",
          "op": ">=",
          "value": 14,
          "weight": 1.0,
          "reason": "Textur: {texture_std:.1f}"
        },
        {
          "metric": "lab_std",
          "op": "<=",
          "value": 6.2,
          "weight": 0.5,
          "reason": "LAB-Std.: {lab_std:.2f}"
        },
        {
          "metric": "dark_delta",
          "op": "<=",
          "value": 35,
          "weight": 0.5,
          "reason": "Dunkelanteil: {dark_delta:.1f}"
        }
      ]
    },
    {
      "label": "farbfehler",
      "min_score": 1.5,
      "conditions": [
        {
          "metric": "has_color",
          "op": "==",
          "value": true,
          "weight": 1.0,
          "reason": "Farbabweichung erkannt"
        },
        {
          "metric": "spot_area",
          "op": ">=",
          "value": 40,
          "weight": 0.7,
          "reason": "Fleckfläche: {spot_area}px"
        },
        {
          "metric": "symmetry",
          "op": ">=",
          "value": 85,
          "weight": 0.5,
          "reason": "Symmetrie: {symmetry:.1f}%"
        }
      ]
    },
    {
      "label": "normal",
      "min_score": 4.5,
      "conditions": [
        {
          "metric": "is_anomaly",
          "op": "==",
          "value": false,
          "weight": 1.5,
          "reason": "Kein Anomalie-Marker"
        },
        {
          "metric": "has_color",
          "op": "==",
          "value": false,
          "weight": 1.5,
          "reason": "Keine Farbabweichung"
        },
        {
          "metric": "fragment_count",
          "op": "==",
          "value": 0,
          "weight": 1.0,
          "reason": "Keine Fragmente"
        },
        {
          "metric": "total_holes",
          "op": "==",
          "value": 7,
          "weight": 0.8,
          "reason": "Hohlräume: {total_holes}"
        },
        {
          "metric": "symmetry",
          "op": ">=",
          "value": 90,
          "weight": 0.8,
          "reason": "Symmetrie: {symmetry:.1f}%"
        },
        {
          "metric": "window_ratio",
          "op": "<=",
          "value": 1.6,
          "weight": 0.5,
          "reason": "Fensterverh.: {window_ratio:.2f}"
        }
      ]
    }
  ]
}
